CREATE TABLE Users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    email TEXT,
    username TEXT,
    password TEXT,
    friends TEXT DEFAULT '[]', -- array of friend IDs
    health_score_avg REAL DEFAULT 0,
    challenge_progress INT DEFAULT 0
);

CREATE TABLE Posts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    userId INTEGER,
    front_image TEXT, -- encode image into base64 string, store here.
    back_image TEXT, -- encode image into base64 string, store here.
    ingredients TEXT, --  array of ingredients
    calories INTEGER,
    health_score REAL,
    visibility TEXT, -- 'public' OR 'friends'
    timestamp DATETIME,
    upvotes INTEGER
);

CREATE TABLE Votes (
    postId INTEGER,
    userId INTEGER,
    upvotes INTEGER
);

CREATE TABLE Challenges (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT,
    goal TEXT,
    start_date DATE,
    end_date DATE
);

insert into Users (email, username, password) values ('test@email.com', 'ze2', 'password');

INSERT INTO Posts (userId, front_image, back_image, ingredients, calories, health_score, visibility, timestamp, upvotes) VALUES
(1, 'iVBORw0KGgoAAAANSUhEUgAA...', 'base64back', '["chicken", "broccoli", "rice", "garlic"]', 450, 8.5, 'public', '2025-02-15 12:34:56', 10),

(2, 'iVBORw0KGgoAAAANSUhEUgAA...', 'base64back', '["salmon", "asparagus", "lemon", "butter"]', 520, 9.2, 'friends', '2025-02-15 13:45:00', 25),

(3, 'iVBORw0KGgoAAAANSUhEUgAA...', 'base64back', '["tofu", "mushrooms", "soy sauce", "bok choy"]', 320, 7.8, 'public', '2025-02-15 14:15:30', 7),

(2, 'iVBORw0KGgoAAAANSUhEUgAA...', 'base64back', '["beef", "potatoes", "carrots", "onions"]', 600, 6.5, 'friends', '2025-02-15 15:00:00', 15),

(1, 'iVBORw0KGgoAAAANSUhEUgAA...', 'base64back', '["shrimp", "zucchini", "garlic", "olive oil"]', 430, 9.0, 'public', '2025-02-15 16:20:10', 30);
